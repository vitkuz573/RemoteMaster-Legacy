@inherits CommonDialogBase

<MudDialog ContentStyle="@ContentStyle">
    <DialogContent>
        <MudExpansionPanels>
            <MudExpansionPanel Text="@GetPanelHeaderText()" Class="mb-5">
                <MudTable Items="Hosts.ToList()" Hover="true" Class="mb-5">
                    <HeaderContent>
                        <MudTh>Name</MudTh>
                        <MudTh>IP Address</MudTh>
                        <MudTh>Status</MudTh>
                        <MudTh>Actions</MudTh>
                    </HeaderContent>
                    <RowTemplate>
                        <MudTd DataLabel="Name">@context.Key.Name</MudTd>
                        <MudTd DataLabel="IP Address">@context.Key.IpAddress</MudTd>
                        <MudTd DataLabel="Status">
                            @if (RequireConnections)
                            {
                                @if (context.Value != null)
                                {
                                    <MudIcon Icon="@Icons.Material.Filled.CheckCircle" Color="Color.Success" />
                                }
                                else
                                {
                                    <MudTooltip Text="@GetErrorMessage(context.Key)">
                                        <MudIcon Icon="@Icons.Material.Filled.Error" Color="Color.Error" />
                                    </MudTooltip>
                                }
                            }
                        </MudTd>
                        <MudTd DataLabel="Actions">
                            @if (RequireConnections)
                            {
                                <MudIconButton Icon="@Icons.Material.Filled.Refresh" OnClick="@(async () => await RecheckConnection(context.Key))"
                                               Class="@GetRefreshIconClass(context.Key)" Disabled="@IsLoading(context.Key)" />
                            }
                            <MudIconButton Icon="@Icons.Material.Filled.Delete" OnClick="@(async () => await RemoveComputer(context.Key))" />
                        </MudTd>
                    </RowTemplate>
                </MudTable>
            </MudExpansionPanel>
        </MudExpansionPanels>
        @Content
    </DialogContent>
    <DialogActions>
        @Actions
    </DialogActions>
</MudDialog>

<style>
    .rotating {
        animation: rotating 2s linear infinite;
    }

    @@keyframes rotating {
        from {
            transform: rotate(0deg);
        }
        to {
            transform: rotate(360deg);
        }
    }
</style>
