@inherits CommonDialogBase

<MudDialog ContentStyle="@ContentStyle">
    <DialogContent>
        <MudExpansionPanels>
            <MudExpansionPanel Text="@GetPanelHeaderText()" Class="mb-5">
                @foreach (var (computer, connection) in Hosts)
                {
                    <MudText>
                        @computer.Name (@computer.IpAddress)
                        @if (RequireConnections)
                        {
                            @if (connection != null)
                            {
                                <MudIcon Icon="@Icons.Material.Filled.CheckCircle" Color="Color.Success" />
                            }
                            else
                            {
                                <MudIcon Icon="@Icons.Material.Filled.Error" Color="Color.Error" />
                            }
                            <MudIconButton Icon="@Icons.Material.Filled.Refresh" OnClick="@(async () => await RecheckConnection(computer))"
                                           Class="@GetRefreshIconClass(computer)" Disabled="@IsLoading(computer)" />
                        }
                    </MudText>
                }
            </MudExpansionPanel>
        </MudExpansionPanels>
        @Content
    </DialogContent>
    <DialogActions>
        @Actions
    </DialogActions>
</MudDialog>

<style>
    .rotating {
        animation: rotating 2s linear infinite;
    }

    @@keyframes rotating {
        from {
            transform: rotate(0deg);
        }

        to {
            transform: rotate(360deg);
        }
    }
</style>
