@page "/{Host}/taskmanager"
@rendermode InteractiveServer
@attribute [Authorize]
@using Microsoft.AspNetCore.Authorization

<MudThemeProvider @bind-IsDarkMode="@_isDarkMode" Theme="_theme" />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudMainContent>
        <MudTable Items="@_processes" Dense="true" Hover="true" Striped="true">
            <HeaderContent>
                <MudTh>Process ID</MudTh>
                <MudTh>Name</MudTh>
                <MudTh>Memory Usage</MudTh>
                <MudTh>CPU Usage (%)</MudTh>
                <MudTh>Actions</MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd DataLabel="Process ID">@context.Id</MudTd>
                <MudTd DataLabel="Name">@context.Name</MudTd>
                <MudTd DataLabel="Memory Usage">@context.MemoryUsage</MudTd>
                <MudTd DataLabel="CPU Usage">@context.CpuUsage</MudTd>
                <MudTd>
                    <MudButton OnClick="@(() => KillProcess(context.Id))" Color="Color.Error">Kill</MudButton>
                </MudTd>
            </RowTemplate>
        </MudTable>
    </MudMainContent>
</MudLayout>
