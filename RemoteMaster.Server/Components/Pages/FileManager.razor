@page "/{Host}/filemanager"
@rendermode InteractiveServer
@attribute [Authorize]
@using Microsoft.AspNetCore.Authorization

<MudThemeProvider @bind-IsDarkMode="@_isDarkMode" Theme="_theme" />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudMainContent>
        <MudTextField @bind-Value="@_currentPath" Label="Path" AdornmentIcon="@Icons.Material.Filled.Folder" Class="mb-2" />
        <MudButton OnClick="@NavigateToPath" Color="Color.Primary" Variant="Variant.Filled">Navigate</MudButton>
        <MudTable Items="@_fileSystemItems">
            <HeaderContent>
                <MudTh>Name</MudTh>
                <MudTh>Type</MudTh>
                <MudTh>Size</MudTh>
            </HeaderContent>
                <RowTemplate>
                    <MudTd DataLabel="Item">
                        <MudButton OnClick="@(() => HandleClick(context))" Class="text-left p-0">
                            <MudIcon Icon="@GetIcon(context.Type)" Class="mr-2" />
                            @context.Name
                        </MudButton>
                    </MudTd>
                    <MudTd DataLabel="Type">@context.Type</MudTd>
                        <MudTd DataLabel="Size">@FormatSize(context.Size)</MudTd>
                </RowTemplate>
            </MudTable>
    </MudMainContent>
</MudLayout>
